<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Voice Trigger Workflows</title>

  <style>
    * {
      box-sizing: border-box;
    }

    .row {
      display: flex;
    }

    .column {
      flex: 50%;
      padding: 10px
    }
  </style>
<meta name="viewport" content="width=device-width, initial-scale=1"><script defer src="voice-trigger-workflows.js"></script></head>

<body>
  <h3>voice-trigger-workflows</h3>
  <div class="row">
    <div class="column">

      <input type="checkbox" id="simulateCall">
      <label for="simulateCall">Simulate a Call</label>
      <br>

      <input type="checkbox" id="darkMode">
      <label for="darkMode">Enable dark mode</label>
      <br><br>
    
      <label for="configJSON">configJSON:</label><br>
      <input type="checkbox" id="sampleConfig">
      <label for="sampleConfig">Load sample config</label>
      <br>
      <textarea rows="35" cols="80" spellcheck="false" id="configJSON"></textarea>
      
      <br><br>

      <label for="taskMap">taskMap:</label><br>
      <input type="checkbox" id="sampleTaskMap">
      <label for="sampleConfig">Load sample taskMap</label>
      <br>
      <textarea rows="35" cols="80" spellcheck="false" id="taskMap"></textarea>
    </div>

    <div class="column">
      <voice-trigger-workflows id="widget" darkmode="false"></voice-trigger-workflows>
    </div>
  </div>




  <script>
    const widget = document.getElementById('widget');
    const darkModeBtn = document.getElementById('darkMode');
    const simulateCallBtn = document.getElementById('simulateCall');
    const sampleConfigBtn = document.getElementById('sampleConfig');
    const configData = document.getElementById('configJSON');
    const sampleTaskMapBtn = document.getElementById('sampleTaskMap');
    const taskMap = document.getElementById('taskMap');
    
    // set all checkboxes to uncheck (needed for when the page reloads)
    darkModeBtn.checked = false;
    simulateCallBtn.checked = false;
    sampleConfigBtn.checked = false;
    sampleTaskMapBtn.checked = false;


    // set inital configJSON data
    configData.value = 
`[
]`;

    // set inital taskMap data
    taskMap.value = 
`{
}`;


    simulateCallBtn.addEventListener("change", (e) => {
      if (simulateCallBtn.checked) {
        widget.taskSelected = {mediaType: "telephony"};
        widget.configJSON = JSON.parse(configData.value);
      } else {
        widget.taskSelected = {};
      }
    })

    darkModeBtn.addEventListener("change", (e) => {
      if (darkModeBtn.checked) {
        widget.setAttribute('darkMode', true);
      } else {
        widget.setAttribute('darkMode', false);
      }
    })

    sampleConfigBtn.addEventListener("change", (e) => {
      if (sampleConfigBtn.checked) {
        configData.value = 
`[
  {
    "name": "Password Reset",
    "url": "https://some-web-site.com/some-web-hook",
    "parameters": [
      {
        "type": "input",
        "name": "message",
        "label": "Send a message"
      },
      {
        "type": "select",
        "name": "channel",
        "label": "Choose a Channel",
        "values": ["sms", "email", "phone"]
      }
    ] 
  },
  {
    "name": "Schedule a Callback",
    "url": "https://some-web-site.com/some-web-hook",
    "parameters": [
      {
        "type": "datetime",
        "name": "scheduledTime",
        "label": "Enter callback Date & Time"
      }
    ]
  },
  {
    "name": "One Time Pin",
    "url": "https://some-web-site.com/some-web-hook",
    "parameters": [
      {
        "type": "select",
        "name": "channel",
        "label": "Choose a Channel",
        "values": ["sms", "email", "phone"]
      },
      {
        "type": "select",
        "name": "lenght",
        "label": "Pick a pin lenght",
        "values": ["4-digit", "5-digit", "6-digit"]
      }
    ]
  },
  {
    "name": "Get Images",
    "url": "https://some-web-site.com/some-web-hook",
    "parameters": [
      {
        "type": "select",
        "name": "channel",
        "label": "Choose a Channel",
        "values": ["sms", "email", "phone"]
      }
    ]
  },
  {
    "name": "Update Account",
    "url": "https://some-web-site.com/some-web-hook"
  }
]`;
      } else {
        configData.value = 
`[
]`;
      }
    })




  </script>

</body>

</html>